{
  "comments": [
    {
      "key": {
        "uuid": "da7fb54a_f403b90b",
        "filename": "services/core/java/com/android/server/power/PowerManagerService.java",
        "patchSetId": 1
      },
      "lineNbr": 1642,
      "author": {
        "id": 13256
      },
      "writtenOn": "2015-04-28T08:26:34Z",
      "side": 1,
      "message": "Proximity Sensor Finder app shows a positive value of +5 cm when nothing is close to the screen and 0 cm when the screen is covered. Your code looks fine but since the value doesn\u0027t appear to go negative perhaps true and false would be more clear indications.\n \n \nThought I\u0027d look at the complete file but I\u0027m not finding it;\nLooked here:\n \n \n      cm-12.0-\nlettuce.2/frameworks/base/core/java/com/android/server\n \n \nI didn\u0027t see a power directory. Wrong git repo?",
      "revId": "0ac31256c0812c6ff2b5aaba4496d87966c2f95d",
      "serverId": "1ec6b3db-b2c1-4fa4-84a2-4c7efe89ba71",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "da7fb54a_f49f39b2",
        "filename": "services/core/java/com/android/server/power/PowerManagerService.java",
        "patchSetId": 1
      },
      "lineNbr": 1642,
      "author": {
        "id": 13256
      },
      "writtenOn": "2015-04-28T08:45:49Z",
      "side": 1,
      "message": "It wasn\u0027t clear why your just changing the nextTimout when the screen is covered. I was wondering how I could see the change if I cherry picked your change and tried it.",
      "parentUuid": "da7fb54a_f403b90b",
      "revId": "0ac31256c0812c6ff2b5aaba4496d87966c2f95d",
      "serverId": "1ec6b3db-b2c1-4fa4-84a2-4c7efe89ba71",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "da7fb54a_944b4d59",
        "filename": "services/core/java/com/android/server/power/PowerManagerService.java",
        "patchSetId": 1
      },
      "lineNbr": 1642,
      "author": {
        "id": 12941
      },
      "writtenOn": "2015-04-28T08:50:28Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "da7fb54a_f403b90b",
      "revId": "0ac31256c0812c6ff2b5aaba4496d87966c2f95d",
      "serverId": "1ec6b3db-b2c1-4fa4-84a2-4c7efe89ba71",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "da7fb54a_34d601c6",
        "filename": "services/core/java/com/android/server/power/PowerManagerService.java",
        "patchSetId": 1
      },
      "lineNbr": 1642,
      "author": {
        "id": 12941
      },
      "writtenOn": "2015-04-28T12:23:17Z",
      "side": 1,
      "message": "For a hardware button enabled phone, make a phone call, cover the proximity sensor, the buttons will turn off but momentarily turn back on.",
      "parentUuid": "da7fb54a_f49f39b2",
      "revId": "0ac31256c0812c6ff2b5aaba4496d87966c2f95d",
      "serverId": "1ec6b3db-b2c1-4fa4-84a2-4c7efe89ba71",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "da7fb54a_54af05e3",
        "filename": "services/core/java/com/android/server/power/PowerManagerService.java",
        "patchSetId": 1
      },
      "lineNbr": 1643,
      "author": {
        "id": 12941
      },
      "writtenOn": "2015-04-28T08:50:28Z",
      "side": 1,
      "message": "mProximityPositive only toggles during a call(object close \u003d true; object far \u003d false) and the screen and button lights are shut off by DisplayPowerController.updatePowerState when it\u0027s true. However right after DisplayPowerController.updatePowerState turns buttons off, the code here turns the buttons back on again. The fix here is to check mProximityPositive flag first before turning on buttons. For devices that do not have a proximity sensor this will always be false. After a phone call ends, mProximityPositive is always restored back to false (via DisplayPowerController\u0027s callback), regardless the sensor reading.",
      "revId": "0ac31256c0812c6ff2b5aaba4496d87966c2f95d",
      "serverId": "1ec6b3db-b2c1-4fa4-84a2-4c7efe89ba71",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "da7fb54a_54dd456f",
        "filename": "services/core/java/com/android/server/power/PowerManagerService.java",
        "patchSetId": 1
      },
      "lineNbr": 1643,
      "author": {
        "id": 13256
      },
      "writtenOn": "2015-04-28T09:09:26Z",
      "side": 1,
      "message": "Ok.\n \nWhile I\u0027m digesting that, could you explain why I don\u0027t see a proximity problem when receiving a call on bacon or Lettuce phones? \n \nScreens on both bacon and lettuce go dark when they detect proximity. Seems fine on this simple test.",
      "parentUuid": "da7fb54a_54af05e3",
      "revId": "0ac31256c0812c6ff2b5aaba4496d87966c2f95d",
      "serverId": "1ec6b3db-b2c1-4fa4-84a2-4c7efe89ba71",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "da7fb54a_34cfe1b1",
        "filename": "services/core/java/com/android/server/power/PowerManagerService.java",
        "patchSetId": 1
      },
      "lineNbr": 1643,
      "author": {
        "id": 13256
      },
      "writtenOn": "2015-04-28T09:17:46Z",
      "side": 1,
      "message": "When I cover part of the phone, so mProximityPositive is false, and I try to terminate the phone call with the hangup button it has no effect. I have had problems with phone calls hanging up while keeping the phone close to my ear. So I get the impression that this is fixing a small window in time where the buttons are activated while the phone is close to your ear.",
      "parentUuid": "da7fb54a_54af05e3",
      "revId": "0ac31256c0812c6ff2b5aaba4496d87966c2f95d",
      "serverId": "1ec6b3db-b2c1-4fa4-84a2-4c7efe89ba71",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "da7fb54a_9477cd01",
        "filename": "services/core/java/com/android/server/power/PowerManagerService.java",
        "patchSetId": 1
      },
      "lineNbr": 1643,
      "author": {
        "id": 13256
      },
      "writtenOn": "2015-04-28T12:02:26Z",
      "side": 1,
      "message": "So this only has to do with the three hardware buttons\nphysically at the bottom of the screen on some phones,\nlike the OPO, not the typically three software buttons \nat the bottom of the screen usually used on the OPO. \n\nRight?",
      "parentUuid": "da7fb54a_34cfe1b1",
      "revId": "0ac31256c0812c6ff2b5aaba4496d87966c2f95d",
      "serverId": "1ec6b3db-b2c1-4fa4-84a2-4c7efe89ba71",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "da7fb54a_145add83",
        "filename": "services/core/java/com/android/server/power/PowerManagerService.java",
        "patchSetId": 1
      },
      "lineNbr": 1643,
      "author": {
        "id": 12941
      },
      "writtenOn": "2015-04-28T12:23:17Z",
      "side": 1,
      "message": "This fix is addressing a race condition of hardware buttons being turned off then on at two different code paths during a phone call(when the proximity sensor is used), not the proximity sensor itself.",
      "parentUuid": "da7fb54a_54dd456f",
      "revId": "0ac31256c0812c6ff2b5aaba4496d87966c2f95d",
      "serverId": "1ec6b3db-b2c1-4fa4-84a2-4c7efe89ba71",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "da7fb54a_f464994a",
        "filename": "services/core/java/com/android/server/power/PowerManagerService.java",
        "patchSetId": 1
      },
      "lineNbr": 1643,
      "author": {
        "id": 12941
      },
      "writtenOn": "2015-04-28T12:23:17Z",
      "side": 1,
      "message": "Yes , hardware buttons only.",
      "parentUuid": "da7fb54a_9477cd01",
      "revId": "0ac31256c0812c6ff2b5aaba4496d87966c2f95d",
      "serverId": "1ec6b3db-b2c1-4fa4-84a2-4c7efe89ba71",
      "unresolved": false
    }
  ]
}