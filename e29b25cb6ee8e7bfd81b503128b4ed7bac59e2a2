{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "8ad15f89_283559f2",
        "filename": "packages/SystemUI/src/com/android/systemui/battery/BatteryMeterViewController.java",
        "patchSetId": 3
      },
      "lineNbr": 198,
      "author": {
        "id": 1063
      },
      "writtenOn": "2024-05-06T04:57:06Z",
      "side": 1,
      "message": "Shouldn\u0027t this be || instead of \u0026\u0026?",
      "revId": "e29b25cb6ee8e7bfd81b503128b4ed7bac59e2a2",
      "serverId": "1ec6b3db-b2c1-4fa4-84a2-4c7efe89ba71"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "5055628d_1a01b503",
        "filename": "packages/SystemUI/src/com/android/systemui/battery/BatteryMeterViewController.java",
        "patchSetId": 3
      },
      "lineNbr": 198,
      "author": {
        "id": 13648
      },
      "writtenOn": "2024-05-06T09:28:59Z",
      "side": 1,
      "message": "Yes, but as per comment above \u0026\u0026 makes it respect the icon hide list. Is there a better way to make it clear it was on purpose?",
      "parentUuid": "8ad15f89_283559f2",
      "revId": "e29b25cb6ee8e7bfd81b503128b4ed7bac59e2a2",
      "serverId": "1ec6b3db-b2c1-4fa4-84a2-4c7efe89ba71"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "9b3633ba_22f054a7",
        "filename": "packages/SystemUI/src/com/android/systemui/battery/BatteryMeterViewController.java",
        "patchSetId": 3
      },
      "lineNbr": 198,
      "author": {
        "id": 1063
      },
      "writtenOn": "2024-05-06T11:17:45Z",
      "side": 1,
      "message": "Maybe the logic would be easier to follow when inverting it:\n\n```\nboolean shouldShow \u003d mBatteryPresent \u0026\u0026 !mBatteryHidden\n```\n\n(I realize that I applied || logic there)\n\nWhen converting the existing logic verbatim, you\u0027d end up with\n\n```\nboolean shouldShow \u003d !(!mBatteryPresent \u0026\u0026 mBatteryHidden)\n```\n\nwhich equals\n\n```\nboolean shouldShow \u003d mBatteryPresent || !mBatteryHidden\n```\n\nwhich means\n- it will be shown whenever a battery is present, regardless of the setting\n- it will be shown if the icon is enabled even without battery\n\nOr am I missing something here?",
      "parentUuid": "5055628d_1a01b503",
      "revId": "e29b25cb6ee8e7bfd81b503128b4ed7bac59e2a2",
      "serverId": "1ec6b3db-b2c1-4fa4-84a2-4c7efe89ba71"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "352ffced_263bd126",
        "filename": "packages/SystemUI/src/com/android/systemui/battery/BatteryMeterViewController.java",
        "patchSetId": 3
      },
      "lineNbr": 198,
      "author": {
        "id": 13648
      },
      "writtenOn": "2024-05-06T11:38:51Z",
      "side": 1,
      "message": "`boolean shouldShow \u003d mBatteryPresent || !mBatteryHidden` won\u0027t work.\n\n\u003e it will be shown whenever a battery is present, regardless of the setting\n\nWe want to respect the setting, always.",
      "parentUuid": "9b3633ba_22f054a7",
      "revId": "e29b25cb6ee8e7bfd81b503128b4ed7bac59e2a2",
      "serverId": "1ec6b3db-b2c1-4fa4-84a2-4c7efe89ba71"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "8a81b7f4_b42de338",
        "filename": "packages/SystemUI/src/com/android/systemui/battery/BatteryMeterViewController.java",
        "patchSetId": 3
      },
      "lineNbr": 198,
      "author": {
        "id": 1063
      },
      "writtenOn": "2024-05-06T11:57:33Z",
      "side": 1,
      "message": "\u003e We want to respect the setting, always.\n\nIn that case, as mentioned, the current logic is wrong: with `mBatteryHidden` being `true` and `mBatteryPresent` being `true`, `shouldHide` becomes `false`.\n\nAs mentioned, my suggestion would be `boolean shouldShow \u003d mBatteryPresent \u0026\u0026 !mBatteryHidden`:\n- without battery, no icon is shown\n- with battery, icon follows the setting\n\nIf you want to show the icon if enabled even if there\u0027s no battery (why?), then you don\u0027t need `mBatteryPresent` in the equation. But the commit message explicitly says that\u0027s not wanted behavior...",
      "parentUuid": "352ffced_263bd126",
      "revId": "e29b25cb6ee8e7bfd81b503128b4ed7bac59e2a2",
      "serverId": "1ec6b3db-b2c1-4fa4-84a2-4c7efe89ba71"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e59944dd_e63c7cbf",
        "filename": "packages/SystemUI/src/com/android/systemui/battery/BatteryMeterViewController.java",
        "patchSetId": 3
      },
      "lineNbr": 198,
      "author": {
        "id": 13648
      },
      "writtenOn": "2024-05-06T12:11:04Z",
      "side": 1,
      "message": "\u003e In that case, as mentioned, the current logic is wrong: with `mBatteryHidden` being `true` and `mBatteryPresent` being `true`, `shouldHide` becomes `false`.\n\nHow come?!?\n\n\u003e If you want to show the icon if enabled even if there\u0027s no battery (why?), then you don\u0027t need `mBatteryPresent` in the equation. But the commit message explicitly says that\u0027s not wanted behavior...\n\nThe only reason is that we expose the statusbar icon list (Settings / System / Status bar / System icons) and battery is always listed there, no matter if device is battery-less.",
      "parentUuid": "8a81b7f4_b42de338",
      "revId": "e29b25cb6ee8e7bfd81b503128b4ed7bac59e2a2",
      "serverId": "1ec6b3db-b2c1-4fa4-84a2-4c7efe89ba71"
    }
  ]
}